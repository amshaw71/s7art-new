<?phpfunction db_connect() { 	static $connection; // Define connection as a static variable, to avoid connecting more than once 	if(!isset($connection)) { // Try and connect to the database, if a connection has not been established yet		$config = parse_ini_file("/home/s7art/etc/mysqli_s7art");// Load configuration as an array from secure file-system location		$host=$config['host'];$username=$config['username'];$password=$config['password'];$database=$config['database'];		$connection = mysqli_connect($config['host'],$config['username'],$config['password'],$config['database']); 	} // If connection was not successful, handle the error	if($connection === false) { // Handle error - notify administrator, log to a file, show an error screen, etc 		echo "error connecting to database in opendb.php";		return mysqli_connect_error();	}	return $connection;}function db_query($query) {	$connection = db_connect(); // Connect to the database	$result = mysqli_query($connection,$query); // Query the database	if($result === false) {		echo ("<h6>Error description: " . mysqli_error($connection) . "</h6>");		return mysqli_error($connection);	}	return $result;}function db_select($query) {	$rows = array();	$result = db_query($query); // If query failed, return `false`	if($result === false) {		echo ("<h6>Error description: " . mysqli_error($connection) . "</h6>");		return false;	} // If query was successful, retrieve all the rows into an array	while ($row = mysqli_fetch_assoc($result)) {		$rows[] = $row;	}	return $rows;}function db_error() {	$connection = db_connect();	return mysqli_error($connection);}function db_quote($value) {	$connection = db_connect();	return "'" . mysqli_real_escape_string($connection,$value) . "'";}// Reference: https://www.binpress.com/tutorial/using-php-with-mysql-the-right-way/17?>
